<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gayrimenkul Portföyü | SMP International</title>
    <link rel="stylesheet" href="styles.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@400;600;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="header-placeholder"></div>

    <div style="background: var(--navy); padding: 100px 5% 33px; text-align: center; color: var(--white);">
        <h1 class="playfair" style="font-size: 3rem;">Yatırım Fırsatlarını Keşfedin</h1>
        <p style="opacity: 0.8; margin-top: 10px;">Birleşik Krallık’ın en stratejik bölgelerinde 15 özel proje</p>
    </div>

    <main class="container">
        <!-- Search & Filter Bar -->
        <div class="search-filter-box">
            <div class="filter-item">
                <label>Bölge Ara</label>
                <input type="text" id="filter-region" placeholder="Örn: Canary Wharf, White City...">
            </div>
            <div class="filter-item">
                <label>Bütçe Aralığı</label>
                <select id="filter-budget">
                    <option value="">Tüm Bütçeler</option>
                    <option value="0-300000">£300k altı</option>
                    <option value="300000-500000">£300k - £500k</option>
                    <option value="500000-800000">£500k - £800k</option>
                    <option value="800000-99999999">£800k+</option>
                </select>
            </div>
            <div class="filter-item">
                <label>Firma</label>
                <select id="filter-firma">
                    <option value="">Tüm Firmalar</option>
                    <option value="Berkeley Group">Berkeley Group</option>
                    <option value="Qualis & Forshaw Group">Qualis & Forshaw Group</option>
                    <option value="Salboy">Salboy</option>
                    <option value="Wavensmere Homes">Wavensmere Homes</option>
                </select>
            </div>
            <div class="filter-item" style="display: flex; align-items: flex-end;">
                <button class="btn btn-primary" id="filter-btn"
                    style="width: 100%; justify-content: center; background: var(--gold);">Sonuçları Filtrele</button>
            </div>
        </div>

        <!-- Projects Grid -->
        <div class="bento-grid project-grid" id="projects-grid" style="grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));">
            <!-- Cards generated by JS -->
        </div>

        <!-- No results message -->
        <div id="no-results" style="display: none; text-align: center; padding: 60px 20px;">
            <h3 class="playfair" style="margin-bottom: 15px;">Sonuç Bulunamadı</h3>
            <p style="color: var(--gray-text);">Filtre kriterlerinize uygun proje bulunamadı. Lütfen farklı bir arama deneyin.</p>
        </div>
    </main>

    <div id="footer-placeholder"></div>

    <script src="projects-data.js"></script>
    <script src="components.js"></script>
    <script src="script.js"></script>

    <script>
        const grid = document.getElementById('projects-grid');
        const noResults = document.getElementById('no-results');

        function renderProjects(projects) {
            grid.innerHTML = '';
            if (projects.length === 0) {
                noResults.style.display = 'block';
                return;
            }
            noResults.style.display = 'none';

            projects.forEach(p => {
                const card = document.createElement('div');
                card.className = 'project-card';
                card.setAttribute('data-firma', p.developer);
                card.setAttribute('data-zone', p.zone || '');
                card.setAttribute('data-price', p.startingPrice);

                card.innerHTML = `
                    <a href="project-detail.html?id=${p.id}" style="text-decoration: none; color: inherit;">
                        <div class="project-image" style="background-image: url('${p.heroImage}'); background-size: cover; background-position: center;"></div>
                        <div class="project-info">
                            <h3 class="playfair">${p.name}</h3>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; font-size: 0.8rem; color: var(--gray-text);">
                                <span>Getiri: ${p.yield}</span>
                                <span>Alan: ${p.area}</span>
                                <span>Fiyat: ${p.priceDisplay}+</span>
                                <span>${p.zone ? p.zone : p.location.split(',')[0]}</span>
                            </div>
                            <div class="btn btn-primary" style="width: 100%; justify-content: center; font-size: 0.8rem;">İncele</div>
                        </div>
                    </a>
                `;
                grid.appendChild(card);
            });
        }

        function applyFilters() {
            const regionQuery = document.getElementById('filter-region').value.toLowerCase().trim();
            const budgetValue = document.getElementById('filter-budget').value;
            const firmaValue = document.getElementById('filter-firma').value;

            let filtered = projectsData.filter(p => {
                // Region filter
                if (regionQuery) {
                    const searchText = (p.zone + ' ' + p.location + ' ' + p.name).toLowerCase();
                    if (!searchText.includes(regionQuery)) return false;
                }

                // Budget filter
                if (budgetValue) {
                    const [min, max] = budgetValue.split('-').map(Number);
                    if (p.startingPrice < min || p.startingPrice > max) return false;
                }

                // Firma filter
                if (firmaValue && p.developer !== firmaValue) return false;

                return true;
            });

            renderProjects(filtered);
        }

        // Initial render
        renderProjects(projectsData);

        // Filter button
        document.getElementById('filter-btn').addEventListener('click', applyFilters);

        // Also filter on Enter key in region input
        document.getElementById('filter-region').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') applyFilters();
        });
    </script>
</body>

</html>
